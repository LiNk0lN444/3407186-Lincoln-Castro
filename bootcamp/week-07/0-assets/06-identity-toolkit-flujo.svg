<svg xmlns="http://www.w3.org/2000/svg" width="900" height="550" viewBox="0 0 900 550" role="img" aria-label="Flujo del proyecto Identity and Access Toolkit">
  <rect width="900" height="550" fill="#0d1117" rx="12"/>
  <rect x="40" y="30" width="820" height="70" fill="#161b22" rx="10" stroke="#30363d"/>
  <text x="60" y="75" fill="#f5f5f5" font-family="'Inter','Segoe UI',sans-serif" font-size="28" font-weight="700">Identity &amp; Access Toolkit: Flujo</text>

  <g transform="translate(60,140)">
    <rect width="220" height="90" fill="#161b22" rx="10" stroke="#30363d"/>
    <text x="20" y="35" fill="#F0DB4F" font-family="'Inter','Segoe UI',sans-serif" font-size="18" font-weight="700">1. UserRegistry</text>
    <text x="20" y="60" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">Map(id→user)</text>
    <text x="20" y="80" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">Set(emails)</text>
  </g>

  <g transform="translate(340,140)">
    <rect width="220" height="90" fill="#161b22" rx="10" stroke="#30363d"/>
    <text x="20" y="35" fill="#F0DB4F" font-family="'Inter','Segoe UI',sans-serif" font-size="18" font-weight="700">2. SessionManager</text>
    <text x="20" y="60" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">WeakMap</text>
    <text x="20" y="80" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">(user→metadata)</text>
  </g>

  <g transform="translate(620,140)">
    <rect width="220" height="90" fill="#161b22" rx="10" stroke="#30363d"/>
    <text x="20" y="35" fill="#F0DB4F" font-family="'Inter','Segoe UI',sans-serif" font-size="18" font-weight="700">3. Permissions</text>
    <text x="20" y="60" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">Map(userId→</text>
    <text x="20" y="80" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="14">Set(permissions))</text>
  </g>

  <g transform="translate(60,270)">
    <rect width="780" height="220" fill="#161b22" rx="10" stroke="#30363d"/>
    <text x="20" y="35" fill="#f5f5f5" font-family="'Inter','Segoe UI',sans-serif" font-size="18" font-weight="700">Flujo de incorporación de usuario</text>
    
    <text x="40" y="70" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="15">1. <text fill="#F0DB4F" font-weight="600">register(user)</text> → valida email único (Set), genera ID</text>
    <text x="40" y="100" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="15">2. <text fill="#F0DB4F" font-weight="600">startSession(userObj)</text> → guarda metadata en WeakMap</text>
    <text x="40" y="130" fill="#c9d1d9" font-family="'Inter','Segoe UI',sans-serif" font-size="15">3. <text fill="#F0DB4F" font-weight="600">grant(userId, permissions)</text> → añade a Set de permisos</text>
    
    <text x="40" y="170" fill="#8b949e" font-family="'Inter','Segoe UI',sans-serif" font-size="14">Remoción cascade: al eliminar usuario, limpia Map, Set emails,</text>
    <text x="40" y="195" fill="#8b949e" font-family="'Inter','Segoe UI',sans-serif" font-size="14">permisos y sesión (WeakMap se limpia automáticamente si no hay refs).</text>
  </g>
</svg>
